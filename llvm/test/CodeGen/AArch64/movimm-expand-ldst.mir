# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 4
# RUN: llc -mtriple=aarch64 -verify-machineinstrs -run-pass=aarch64-expand-pseudo -run-pass=aarch64-ldst-opt -debug-only=aarch64-ldst-opt %s -o - | FileCheck %s
---
# CHECK-LABEL: name: test_fold_repeating_constant_load
# CHECK: renamable $x0 = MOVZXi 49370, 0
# CHECK: renamable $x0 = MOVKXi $x0, 320, 16
# CHECK: renamable $x0 = ORRXrs $x0, $x0, 32
name: test_fold_repeating_constant_load
tracksRegLiveness: true
body:             |
  bb.0:
    renamable $x0 = MOVi64imm 90284035103834330
    RET_ReallyLR implicit $x0
...
---
# CHECK-LABEL: name: test_fold_repeating_constant_load_neg
# CHECK: renamable $x0 = MOVZXi 320, 0
# CHECK: renamable $x0 = MOVKXi $x0, 49370, 16
# CHECK: renamable $x0 = ORRXrs $x0, $x0, 32
name: test_fold_repeating_constant_load_neg
tracksRegLiveness: true
body:             |
  bb.0:
    liveins: $x0

    renamable $x0 = MOVi64imm -4550323095879417536
    RET_ReallyLR implicit $x0
...
---
# CHECK-LABEL: name: test_fold_repeating_constant_load_store_twice
# CHECK: $w8 = MOVZWi 49370, 0
# CHECK: $w8 = MOVKWi $w8, 320, 16
# CHECK: STPWi renamable $w8, renamable $w8, killed renamable $x0, 0
# CHECK: STRXui killed renamable $x8, killed renamable $x1, 0
name: test_fold_repeating_constant_load_store_twice
tracksRegLiveness: true
body:             |
  bb.0:
    liveins: $x0, $x1

    renamable $x8 = MOVi64imm 90284035103834330
    STRXui renamable $x8, killed renamable $x0, 0
    STRXui killed renamable $x8, killed renamable $x1, 0
    RET_ReallyLR
...
---
# CHECK-LABEL: name: test_fold_repeating_constant_load_use_reg_before_store
# CHECK: renamable $x8 = MOVZXi 49370, 0
# CHECK: renamable $x8 = MOVKXi $x8, 320, 16
# CHECK: renamable $x8 = ORRXrs $x8, $x8, 32
# CHECK: renamable $x9 = ADDXrs renamable $x8, renamable $x8, 32
# CHECK: STRXui renamable $x8, killed renamable $x0, 0
name: test_fold_repeating_constant_load_use_reg_before_store
tracksRegLiveness: true
body:             |
  bb.0:
    liveins: $x0

    renamable $x8 = MOVi64imm 90284035103834330
    renamable $x9 = ADDXrs renamable $x8, renamable $x8, 32
    STRXui renamable $x8, killed renamable $x0, 0
    RET_ReallyLR
